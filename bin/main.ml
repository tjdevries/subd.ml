(* open Riot *)
(* let trail = *)
(*   let open Trail in *)
(*   let open Router in *)
(*   [ use (module Logger) Logger.(args ~level:Debug ()) *)
(*   ; router *)
(*       [ get "/" (fun conn -> Conn.send_response `OK {%b|"hello world"|} conn) *)
(*       ; socket "/ws" (module Echo_server) () *)
(*       ; scope "/api" [ get "/version" (Conn.send_response `OK {%b|"none"|}) ] *)
(*       ] *)
(*   ] *)
(* ;; *)
(* [@@@warning "-8"] *)
(* let ( let* ) = Result.bind *)
(* let start_nvim_server () = *)
(*   let port = 8080 in *)
(*   let handler = Nomad.trail trail in *)
(*   let (Ok pid) = Nomad.start_link ~port ~handler () in *)
(*   Logger.info (fun f -> f "Listening on 0.0.0.0:%d" port); *)
(*   pid *)
(* ;; *)
